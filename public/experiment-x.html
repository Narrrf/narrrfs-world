<!DOCTYPE html>
<head>
  <!-- Meta Essentials -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Experiment X | Narrrf's World</title>

  <!-- Favicon & Metadata -->
  <link rel="icon" type="image/png" href="img/favicon2.PNG" />
  <meta name="theme-color" content="#facc15" />
  <meta name="msapplication-TileColor" content="#facc15" />
  <meta name="msapplication-TileImage" content="img/favicon2.PNG" />
  <meta name="title" content="Narrrf's World" />
  <meta name="description" content="Mutant visuals & future chaos from Narrrf's Lab." />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

    <!-- ğŸ”— Discord Token of Render System -->
  <script src="discord-config.js"></script>

  <!-- Carousel & Lab Animations -->
  <style>
    @keyframes labBubble {
      0% { transform: translateY(0) scale(1); opacity: 0.7; }
      100% { transform: translateY(-60px) scale(1.2); opacity: 0; }
    }
    .animate-lab-bubble {
      animation: labBubble 5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.05); }
    }
    .animate-pulse {
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes floatMouse {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }
    .floaty {
      animation: floatMouse 3s ease-in-out infinite;
    }
@keyframes scaleIn {
  0% {
    transform: scale(0.7);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}
.animate-scaleIn {
  animation: scaleIn 0.6s ease-out forwards;
}

  </style>
</head>


<body class="relative bg-gradient-to-br from-purple-50 to-pink-100 text-gray-900 font-sans min-h-screen overflow-x-hidden">

<body>
  <!-- 
  ğŸ§ª CRITICAL LAB NOTES: EXPERIMENT-X.HTML (GAME MECHANICS & TESTING)
  ------------------------------------------------------------
  Purpose: 
    - Showcase of early test visuals, mutated scenes, and game mechanic experiments.
    - Links to **NFT traits** and **Hytopia land** integration.
    - **Backend Data** for dynamic plot ownership and staking rewards.

  ğŸ’¾ **SQL Structure**:
    - Tables for **user plots**, **staking rewards**, **NFT traits**.
    - **Dynamic data** for **plot ownership** and **NFT traits**.

  ğŸ§  **Game Features**:
    - Users with **NFT traits** can access **Hytopia land** in **Experiment X**.
    - Rewards and **staking stats** tied to **NFT ownership**


  <!-- ğŸ§ª Navigation -->
  <header class="bg-black text-white py-4 px-6 shadow-md sticky top-0 z-50">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <a href="index.html" class="text-xl font-bold tracking-tight">ğŸ§  Narrrf's World</a>
      <nav class="space-x-4 text-sm md:text-base flex items-center">
        <a href="index.html" class="hover:text-pink-400">Home</a>
        <a href="mint.html" class="hover:text-pink-400">Mint</a>
        <a href="whitepaper.html" class="hover:text-pink-400">Whitepaper</a>
        <a href="get-roles.html" class="hover:text-pink-400">Get Roles</a>
        <a href="project-updates.html" class="hover:text-pink-400">Updates</a>
        <a href="faq.html" class="hover:text-pink-400">FAQ</a>
        <button id="connect-wallet-btn" onclick="connectWallet()" class="ml-4 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-1 px-4 rounded-xl shadow text-xs">ğŸ”Œ Connect</button>
        <img id="user-avatar" src="cheese.PNG" alt="PFP" class="hidden w-8 h-8 rounded-full border-2 border-white ml-4 shadow-lg" />
      </nav>
    </div>
  </header>


  <!-- Hero -->
  <section class="text-center py-16 px-6">
    <h1 class="text-4xl font-bold mb-4">ğŸ§¬ Welcome to Experiment X</h1>
    <p class="text-md text-gray-700 max-w-xl mx-auto">Lab preview of upcoming maps, scenes, and mouseverse mutations.</p>
  </section>

<!-- ğŸ§ª Main Content Area
  ----------------------------------------------
  ğŸ¨ This is the main display of visuals & lore.
  ğŸ‘¶ Dev Tips for Baby Brain 5yo:
    - <main> = your main story zone. It's like the comic page.
    - Everything here is centered and spaced with Tailwind classes.
-->
<main class="max-w-5xl mx-auto px-6 py-12 space-y-12 z-10 relative">

  <!-- ğŸ§¬ Headline -->
  <h1 class="text-4xl font-extrabold text-center mb-6">ğŸ§¬ Experiment X: The Mutant Chronicles</h1>
  <p class="text-center max-w-xl mx-auto text-gray-700 mb-8">
    Deep from the Narrrf Labs, a genetic experiment gave rise to the legends. Dive into the visuals and meet the freaks born from cheese, time, and a sprinkle of chaos.
  </p>

<!-- ğŸï¸ Narrrf Visual Mutation Zone
--------------------------------------------------------------
ğŸ§  DEV NOTES:
This is the dual-mode display section for both:
1. ğŸ§ª Experiment Mode â€” animated image slider of mutant assets
2. ğŸ¨ HDR Art Mode â€” high-resolution zoom grid from IPFS

ğŸ”§ Architecture:
- Uses toggleSliderMode('exp' | 'art') for switching
- All experiment carousel images injected dynamically via JS
- HDR images can also be loaded via static markup or JSON/IPFS

ğŸ“ Folders:
- Experiment images from: /img/Carusel1 (1-81)_small.PNG
- HDR Art pulled from IPFS gateways

ğŸ’¡ Goals:
- Modular, future-proof, mobile-optimized
- Smooth toggle and rendering separation
-------------------------------------------------------------- -->

<!-- ğŸ§¬ NFT Visual Carousel Promo | From experiment-x.html | Genesis 11.0 -->
<!-- ğŸ§¬ NFT Visual Carousel Promo | From experiment-x.html | Genesis 11.0 -->
<!-- ğŸ§¬ NFT Visual Carousel Promo | From experiment-x.html | Genesis 11.0 -->
<!-- ğŸ§¬ Narrrf Dual Mode Visual Lab Section -->
<section class="max-w-6xl mx-auto px-6 py-20 text-center z-10 relative">

  <!-- ğŸ›ï¸ Slider Toggle Controls -->
  <div class="flex justify-center gap-4 mb-10">
    <button onclick="toggleSliderMode('exp')" class="bg-yellow-300 hover:bg-yellow-400 text-black font-semibold px-5 py-2 rounded-full shadow transition">
      ğŸ§ª Experiment Mode
    </button>
    <button onclick="toggleSliderMode('art')" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold px-5 py-2 rounded-full shadow transition">
      ğŸ¨ HDR Art Zoom Mode
    </button>
  </div>

  <!-- ğŸ§ª Carousel Mode -->
  <div id="carousel-zone" class="block">
    <div id="carousel-images" class="overflow-hidden rounded-xl shadow-lg bg-white cursor-grab select-none" style="touch-action: pan-y pinch-zoom;">
      <!-- JS injects 81 carusel images -->
    </div>
    <div class="flex justify-between items-center mt-4">
      <button onclick="showSlide(-1)" class="bg-pink-500 text-white px-4 py-2 rounded-full shadow hover:bg-pink-600">â† Prev</button>
      <button onclick="showSlide(1)" class="bg-purple-500 text-white px-4 py-2 rounded-full shadow hover:bg-purple-600">Next â†’</button>
    </div>
    <p class="text-xs text-gray-500 text-center mt-2">ğŸ’¡ Swipe left/right or drag to navigate</p>
  </div>

<!-- ğŸ¨ HDR IPFS ART GALLERY -->
<div id="art-mode-slider" class="hidden mt-10">
  <div id="hdr-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-4 justify-center items-start">
    <!-- Images loaded dynamically via JavaScript -->
  </div>
  <div class="text-center mt-4">
    <button id="load-more-hdr" onclick="loadMoreHDRImages()" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-full shadow transition">
      ğŸ”„ Load More HDR Images
    </button>
  </div>
</div>

<!-- ğŸ–¼ï¸ HDR Fullscreen Viewer -->
<div id="hdrFullscreen" class="hidden fixed inset-0 bg-black bg-opacity-95 z-50 flex flex-col items-center justify-center transition-all duration-300 cursor-grab" style="touch-action: pan-y pinch-zoom;">
  <!-- âŒ Exit Button -->
  <button onclick="closeHDR()" class="absolute top-4 right-4 text-white bg-pink-600 hover:bg-pink-700 px-4 py-2 rounded-full shadow-lg text-sm z-50 transition-all duration-200">
    âŒ Exit HDR View
  </button>

  <!-- ğŸ–¼ï¸ Fullscreen Image - Maximized for full screen -->
  <img id="hdrImage" src="" alt="HDR Art" class="w-full h-full object-contain animate-scaleIn" />

  <!-- â¬…ï¸â¡ï¸ Navigation Controls -->
  <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex flex-col items-center gap-2">
    <div class="flex gap-4">
      <button onclick="navigateHDR(-1)" class="bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-200 text-lg">â† Prev</button>
      <button onclick="navigateHDR(1)" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-200 text-lg">Next â†’</button>
    </div>
    <p class="text-xs text-gray-400 text-center">ğŸ’¡ Swipe left/right or drag to navigate â€¢ ESC to close</p>
  </div>
</div>

<script>
  // ğŸ§ª Carousel Logic with Swipe Support
  let index = 0;
  let isDragging = false;
  let startX = 0;
  let currentX = 0;
  let dragDistance = 0;
  const SWIPE_THRESHOLD = 50; // Minimum distance for swipe

  function showSlide(step) {
    const slides = document.querySelectorAll(".carousel-slide");
    if (!slides.length) return;
    index = (index + step + slides.length) % slides.length;
    slides.forEach((slide, i) => {
      slide.classList.toggle("hidden", i !== index);
      slide.classList.toggle("block", i === index);
    });
  }

  // ğŸ–±ï¸ Mouse/Touch Swipe Support
  function initializeSwipeSupport() {
    const carouselContainer = document.getElementById('carousel-images');
    if (!carouselContainer) return;

    // Mouse events for desktop
    carouselContainer.addEventListener('mousedown', handleDragStart);
    carouselContainer.addEventListener('mousemove', handleDragMove);
    carouselContainer.addEventListener('mouseup', handleDragEnd);
    carouselContainer.addEventListener('mouseleave', handleDragEnd);

    // Touch events for mobile
    carouselContainer.addEventListener('touchstart', handleDragStart);
    carouselContainer.addEventListener('touchmove', handleDragMove);
    carouselContainer.addEventListener('touchend', handleDragEnd);

    // Prevent default drag behavior
    carouselContainer.addEventListener('dragstart', (e) => e.preventDefault());
  }

  function handleDragStart(e) {
    isDragging = true;
    startX = e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;
    currentX = startX;
    dragDistance = 0;
    
    const carouselContainer = document.getElementById('carousel-images');
    if (carouselContainer) {
      carouselContainer.style.cursor = 'grabbing';
      carouselContainer.style.userSelect = 'none';
    }
  }

  function handleDragMove(e) {
    if (!isDragging) return;
    
    e.preventDefault();
    currentX = e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;
    dragDistance = currentX - startX;
    
    // Add visual feedback during drag
    const carouselContainer = document.getElementById('carousel-images');
    if (carouselContainer && Math.abs(dragDistance) > 10) {
      carouselContainer.style.transform = `translateX(${dragDistance * 0.1}px)`;
      carouselContainer.style.transition = 'none';
    }
  }

  function handleDragEnd() {
    if (!isDragging) return;
    
    isDragging = false;
    
    const carouselContainer = document.getElementById('carousel-images');
    if (carouselContainer) {
      carouselContainer.style.cursor = 'grab';
      carouselContainer.style.userSelect = 'auto';
      carouselContainer.style.transform = '';
      carouselContainer.style.transition = 'transform 0.3s ease-out';
    }

    // Determine swipe direction and trigger slide change
    if (Math.abs(dragDistance) > SWIPE_THRESHOLD) {
      if (dragDistance > 0) {
        // Swipe right - go to previous slide
        showSlide(-1);
      } else {
        // Swipe left - go to next slide
        showSlide(1);
      }
    }
    
    // Reset drag distance
    dragDistance = 0;
  }

  // ğŸ–±ï¸ HDR Swipe Support Functions
  function initializeHDRSwipeSupport() {
    const hdrContainer = document.getElementById('hdrFullscreen');
    if (!hdrContainer) return;

    // Mouse events for desktop
    hdrContainer.addEventListener('mousedown', handleHDRDragStart);
    hdrContainer.addEventListener('mousemove', handleHDRDragMove);
    hdrContainer.addEventListener('mouseup', handleHDRDragEnd);
    hdrContainer.addEventListener('mouseleave', handleHDRDragEnd);

    // Touch events for mobile
    hdrContainer.addEventListener('touchstart', handleHDRDragStart);
    hdrContainer.addEventListener('touchmove', handleHDRDragMove);
    hdrContainer.addEventListener('touchend', handleHDRDragEnd);

    // Prevent default drag behavior
    hdrContainer.addEventListener('dragstart', (e) => e.preventDefault());
  }

  function removeHDRSwipeSupport() {
    const hdrContainer = document.getElementById('hdrFullscreen');
    if (!hdrContainer) return;

    // Remove mouse events
    hdrContainer.removeEventListener('mousedown', handleHDRDragStart);
    hdrContainer.removeEventListener('mousemove', handleHDRDragMove);
    hdrContainer.removeEventListener('mouseup', handleHDRDragEnd);
    hdrContainer.removeEventListener('mouseleave', handleHDRDragEnd);

    // Remove touch events
    hdrContainer.removeEventListener('touchstart', handleHDRDragStart);
    hdrContainer.removeEventListener('touchmove', handleHDRDragMove);
    hdrContainer.removeEventListener('touchend', handleHDRDragEnd);
  }

  function handleHDRDragStart(e) {
    isHDRDragging = true;
    hdrStartX = e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;
    hdrCurrentX = hdrStartX;
    hdrDragDistance = 0;

    const hdrContainer = document.getElementById('hdrFullscreen');
    if (hdrContainer) {
      hdrContainer.style.cursor = 'grabbing';
      hdrContainer.style.userSelect = 'none';
    }
  }

  function handleHDRDragMove(e) {
    if (!isHDRDragging) return;

    e.preventDefault();
    hdrCurrentX = e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;
    hdrDragDistance = hdrCurrentX - hdrStartX;

    // Add visual feedback during drag
    const hdrImage = document.getElementById('hdrImage');
    if (hdrImage && Math.abs(hdrDragDistance) > 10) {
      hdrImage.style.transform = `translateX(${hdrDragDistance * 0.1}px)`;
      hdrImage.style.transition = 'none';
    }
  }

  function handleHDRDragEnd() {
    if (!isHDRDragging) return;

    isHDRDragging = false;

    const hdrContainer = document.getElementById('hdrFullscreen');
    const hdrImage = document.getElementById('hdrImage');
    
    if (hdrContainer) {
      hdrContainer.style.cursor = 'grab';
      hdrContainer.style.userSelect = 'auto';
    }
    
    if (hdrImage) {
      hdrImage.style.transform = '';
      hdrImage.style.transition = 'transform 0.3s ease-out';
    }

    // Determine swipe direction and trigger HDR navigation
    if (Math.abs(hdrDragDistance) > HDR_SWIPE_THRESHOLD) {
      if (hdrDragDistance > 0) {
        // Swipe right - go to previous HDR image
        navigateHDR(-1);
      } else {
        // Swipe left - go to next HDR image
        navigateHDR(1);
      }
    }

    // Reset drag distance
    hdrDragDistance = 0;
  }

  // ğŸ¨ HDR Fullscreen Logic
  let currentHDRIndex = 0;
  
  // ğŸ–±ï¸ HDR Swipe Support Variables
  let isHDRDragging = false;
  let hdrStartX = 0;
  let hdrCurrentX = 0;
  let hdrDragDistance = 0;
  const HDR_SWIPE_THRESHOLD = 50; // Minimum distance for HDR swipe

function openHDR(figureEl) {
  const full = document.getElementById('hdrFullscreen');
  const hdrImage = document.getElementById('hdrImage');
  if (!figureEl || !hdrImage || !full) return;

  const index = parseInt(figureEl.dataset.index || "0", 10);
  currentHDRIndex = index;

  const img = figureEl.querySelector('img');
  if (!img || !img.src) return;

  hdrImage.src = img.src;
  full.classList.remove('hidden');
  full.classList.add('flex');
  document.body.classList.add('overflow-hidden');
  
  // Initialize HDR swipe support
  initializeHDRSwipeSupport();
}

// Add this function to enable closing HDR fullscreen
function closeHDR() {
  const full = document.getElementById('hdrFullscreen');
  if (full) {
    full.classList.add('hidden');
    full.classList.remove('flex');
  }
  document.body.classList.remove('overflow-hidden');
  
  // Remove HDR swipe event listeners
  removeHDRSwipeSupport();
}


function navigateHDR(step) {
  const figures = document.querySelectorAll('#art-mode-slider figure');
  if (!figures.length) return;

  currentHDRIndex = (currentHDRIndex + step + figures.length) % figures.length;
  const targetFigure = figures[currentHDRIndex];
  openHDR(targetFigure);
}


  document.addEventListener("keydown", (e) => {
    const isOpen = !document.getElementById('hdrFullscreen').classList.contains('hidden');
    if (!isOpen) return;
    if (e.key === "Escape") closeHDR();
    if (e.key === "ArrowRight") navigateHDR(1);
    if (e.key === "ArrowLeft") navigateHDR(-1);
  });

  // ğŸ›ï¸ Mode Switching
  function toggleSliderMode(mode) {
    const exp = document.getElementById('carousel-zone');
    const art = document.getElementById('art-mode-slider');

    if (!exp || !art) return;

    if (mode === 'exp') {
      exp.style.display = 'block';
      art.style.display = 'none';
      closeHDR();
    } else {
      exp.style.display = 'none';
      art.style.display = 'block';
      setTimeout(() => {
        const firstFigure = document.querySelector('#art-mode-slider figure[data-index="0"]');
        if (firstFigure) openHDR(firstFigure);
      }, 100);
    }
  }

  // ğŸ§ª Inject carusel images
  window.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('carousel-images');
    if (container) {
      for (let i = 1; i <= 81; i++) {
        const img = document.createElement('img');
        img.src = `img/Carusel1 (${i})_small.png`;
        img.className = `carousel-slide ${i === 1 ? 'block' : 'hidden'} w-full`;
        container.appendChild(img);
      }
    }
    showSlide(0);
    
    // Initialize swipe support for the carousel
    initializeSwipeSupport();
    
    // Initialize HDR grid with first 20 images
    initializeHDRGrid();
  });

  // ğŸ¨ HDR Grid Management
  let hdrImagesLoaded = 0;
  const HDR_BATCH_SIZE = window.innerWidth <= 768 ? 10 : 20; // Smaller batches for mobile
  const TOTAL_HDR_IMAGES = 151;
  let isLoadingHDR = false; // Prevent multiple simultaneous loads

  function initializeHDRGrid() {
    const grid = document.getElementById('hdr-grid');
    if (!grid) return;
    
    // Load first batch of HDR images
    loadHDRImages(0, HDR_BATCH_SIZE);
  }

  function loadHDRImages(startIndex, count) {
    const grid = document.getElementById('hdr-grid');
    if (!grid || isLoadingHDR) return;

    isLoadingHDR = true;
    let loadedCount = 0;
    const targetCount = Math.min(startIndex + count, TOTAL_HDR_IMAGES);

    for (let i = startIndex; i < targetCount; i++) {
      const figure = document.createElement('figure');
      figure.className = 'rounded-xl shadow-lg overflow-hidden cursor-pointer hover:scale-105 transition-all';
      figure.setAttribute('data-index', i);
      figure.onclick = () => openHDR(figure);

      const img = document.createElement('img');
      img.src = `https://ec04f79279368ef19713ae9212cac094.ipfs.4everland.link/ipfs/bafybeig4p7562trvm2uh4cns73hb3u5ef5ghmufixgizbu2om2mthn373u/${i}.PNG`;
      img.alt = `HDR Zoom ${i + 1}`;
      img.className = 'object-cover w-full h-auto max-h-[300px]';
      img.loading = 'lazy';

      // Add error handling for image loading
      img.onerror = () => {
        console.warn(`Failed to load HDR image ${i}`);
        // Remove the figure if image fails to load
        if (figure.parentNode) {
          figure.parentNode.removeChild(figure);
        }
        loadedCount++;
        if (loadedCount >= targetCount - startIndex) {
          finishHDRLoading();
        }
      };

      img.onload = () => {
        loadedCount++;
        if (loadedCount >= targetCount - startIndex) {
          finishHDRLoading();
        }
      };

      const figcaption = document.createElement('figcaption');
      figcaption.className = 'text-xs text-gray-500 mt-2 text-center';
      figcaption.textContent = 'ğŸ” Click to zoom';

      figure.appendChild(img);
      figure.appendChild(figcaption);
      grid.appendChild(figure);
    }

    // Fallback in case no images load
    setTimeout(() => {
      if (isLoadingHDR) {
        finishHDRLoading();
      }
    }, 5000);
  }

  function finishHDRLoading() {
    isLoadingHDR = false;
    hdrImagesLoaded = Math.min(hdrImagesLoaded + HDR_BATCH_SIZE, TOTAL_HDR_IMAGES);
    
    // Update load more button
    const loadMoreBtn = document.getElementById('load-more-hdr');
    if (loadMoreBtn) {
      if (hdrImagesLoaded >= TOTAL_HDR_IMAGES) {
        loadMoreBtn.style.display = 'none';
      } else {
        loadMoreBtn.textContent = `ğŸ”„ Load More (${hdrImagesLoaded}/${TOTAL_HDR_IMAGES})`;
      }
    }
  }

  function loadMoreHDRImages() {
    if (!isLoadingHDR) {
      loadHDRImages(hdrImagesLoaded, HDR_BATCH_SIZE);
    }
  }
</script>

<!-- ğŸ““ Developer Lab Notes: GENESIS 12.0 -->
<div class="bg-white p-6 rounded-xl shadow border-l-4 border-yellow-400 mt-12">
  <h2 class="text-2xl font-bold mb-2">ğŸ§ª Developer Log Â· Experiment X</h2>
  <ul class="list-disc list-inside text-sm space-y-1 text-gray-700 leading-relaxed">
    
    <li>ğŸ§€ <strong>Slider Mode Switcher:</strong> Toggle between carousel and HDR art grid.</li>
    <li>ğŸ¨ <strong>HDR Zoom Mode:</strong> Uses IPFS-sourced <code>.PNG</code> visuals (up to 4K+) â€” ~150 assets total</li>
    <li>ğŸ§  <strong>Slide Engine:</strong> Classic vanilla JS switcher (no external libs needed)</li>
    <li>ğŸ“¦ <strong>Future Integration:</strong> Add image filtering, fullscreen view, and swipe support (mobile)</li>
    <li>ğŸŒ <strong>Experiment Context:</strong> Lore-mutation visuals, expression tests, and character evolution for Narrrfverse</li>
    <li>ğŸ“œ <strong>Extra:</strong> Toggle UI persists across sessions (optionally extend to use riddle mode)</li>
    
  </ul>
</div>


</main>
<!-- ğŸ§  Done. Scroll to footer next. -->


  <!-- Footer -->
  <footer class="text-center py-6 text-sm text-purple-700">
    Built in the Lab with love and ğŸ§€ | <a href="https://discord.gg/rHc4Jg5Q" class="underline text-pink-600">Join us on Discord</a>
  </footer>

<!-- Wallet + Carousel Scripts -->

<script>
    async function connectWallet() {
      const avatar = document.getElementById('user-avatar');
      const connectButton = document.getElementById('connect-wallet-btn');

      if ('solana' in window) {
        const provider = window.solana;
        if (provider.isPhantom) {
          try {
            const response = await provider.connect();
            const walletAddress = response.publicKey.toString();
            localStorage.setItem('walletAddress', walletAddress);
            connectButton.innerText = `ğŸŸ¢ ${walletAddress.slice(0, 4)}...${walletAddress.slice(-4)}`;
            connectButton.disabled = true;
            avatar?.classList.remove('hidden');
          } catch (err) {
            console.error("âŒ Wallet connect error:", err);
          }
        }
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      const storedWallet = localStorage.getItem('walletAddress');
      const avatar = document.getElementById('user-avatar');
      const connectButton = document.getElementById('connect-wallet-btn');

      if (storedWallet && connectButton) {
        connectButton.innerText = `ğŸŸ¢ ${storedWallet.slice(0, 4)}...${storedWallet.slice(-4)}`;
        connectButton.disabled = true;
        avatar?.classList.remove('hidden');
      }

      showSlide(0); // start at first carousel slide
    });
  </script>
<!-- 
===========================================================
ğŸ§  NARRRF'S WORLD â€” GENESIS 12.0 Â· FULL SYSTEM PACKAGE
===========================================================

ğŸ® Certified By:
- ğŸ§  Brain 4.0
- ğŸ§€ Masterchiefe (SQL Oracle)
- ğŸ‘¶ Narrrf (5yo Padawan Prime)
- ğŸ‘½ The Alien Observer (Session Layer)

ğŸŒ Purpose:
A self-sustaining, gamified Web3 system fusing:
- NFT Ownership + Wallet Roles
- SQL Game Logic + DOM Triggers
- Web2 Immersion + Web3 Interactivity

ğŸ’¾ Core Deployment Path:
â†’ `/public/index.html`, `/experiment-x.html`, `/api/*`, `/db/narrrf_world.sqlite`

ğŸ“š Reference DB Table: `tbl_cheese_clicks`

-----------------------------------------------------------
ğŸ§ª CORE MODULES IN PLAY â€“ GENESIS 12.0
-----------------------------------------------------------

1. ğŸ§€ CHEESE EGG ENGINE v1.4.2:
   - Moves eggs dynamically in DOM
   - Tracks clicks â†’ wallet â†’ DB
   - Hooks for unlockables and lore trails

2. ğŸ” VIP ROLE GATE:
   - Validates Discord roles via `/api/user/roles.php`
   - Enables exclusive assets (VIP Art / HD Downloads)

3. ğŸ§  RIDDLE ENGINE v2.0:
   - Expands lore through egg-node interactions
   - Trait and time-based unlock gates
   - Future-ready: time-locked and map-wide riddles

-----------------------------------------------------------
ğŸ“¦ DATABASE DESIGN â€” MINIMAL AND SCALABLE
-----------------------------------------------------------

ğŸ“‚ `tbl_cheese_clicks`
- `user_wallet` TEXT
- `egg_id` TEXT
- `timestamp` DATETIME

âœ… All interactions tracked via:
â†’ `localStorage.walletAddress`
â†’ `egg_id`
â†’ `Date.now()`

POST to:  
â¡ï¸ `/api/track-egg-click`

-----------------------------------------------------------
ğŸ§‘â€ğŸ’» DEVELOPER PROTOCOL FOR NEXT GENERATIONS
-----------------------------------------------------------

ğŸ”§ Wallet Testing:
- Phantom, Brave, WalletConnect, Mobile DApps

ğŸ”§ Egg Logic QA:
- Console fetch logs
- DB validation post-interaction

ğŸ”§ DOM Guardrails:
- VIP roles = "VIP_pass" or "VIP Holder"
- Non-null checks on all user-triggered UI

ğŸ”§ Carousel + IPFS Grid:
- JS-powered image injection
- Toggle logic: `toggleSliderMode('exp'|'art')`

-----------------------------------------------------------
ğŸ”® FUTURE EVOLUTION
-----------------------------------------------------------

ğŸš€ Cheese Dungeons + Puzzle Grids  
ğŸ§¬ Lore-driven trait evolutions  
ğŸ Time-released NFT rewards  
ğŸª™ Direct $SPOINC â†’ unlock mechanisms  
ğŸ§  AI-generated riddle chains (2026-ready)

-----------------------------------------------------------
ğŸ§  Certified by Narrrf Core Â· Last Updated: 2025-07-23
ğŸ’¾ Status: GENESIS 12.0 â€“ LIVE AND LEARNING
-----------------------------------------------------------
-->


<!-- ======================================== -->
<!-- ğŸ§  HTML Brain 4.0 Footer Â· Lab Portal -->
<!-- ======================================== -->

<section id="hytopia-portal" class="mt-16 px-6">
  <div class="max-w-xl mx-auto text-center">
    <a href="/hytopia.html" class="group inline-block relative" title="ğŸ§€ Hytopia portal is closed... for now.">
      <div class="relative p-4 rounded-full bg-yellow-300/90 hover:bg-yellow-400 transition-all duration-300 shadow-2xl animate-pulse">
        <img src="img/cheese-portal.PNG" alt="Enter Hytopia" class="w-24 h-24 sm:w-32 sm:h-32 mx-auto group-hover:scale-105 transition-transform duration-300 drop-shadow-lg" />
        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
          <div class="text-xs bg-black/80 text-yellow-300 px-3 py-1 rounded-full shadow-md animate-pulse">
            ğŸ§€ Portal Closed Â· Opening Soon!
          </div>
        </div>
      </div>
      <p class="mt-3 text-base font-bold text-yellow-800 group-hover:text-yellow-900">
        âœ¨ Step Toward Hytopia
      </p>
    </a>
  </div>
</section>

<footer class="text-center text-xs text-yellow-600 py-4 mt-12">
  ğŸ§  Powered by Cheese Architect 12.0 Â· Brain Sync Complete ğŸ§¬<br>
  â›©ï¸ Built in the Narrrf Lab | Last Update: 2025 Â· Coreforge Verified ğŸ”<br>
  ğŸ§€ Built with brain & cheese Â· Genesis 12.0 Protocol Active
</footer>

<!-- ğŸ§¬ This marks the official footer of all lore- and riddle-linked surfaces. -->
<!-- ğŸš« DO NOT REMOVE UNLESS INSTRUCTED BY THE OVER BRAIN. -->


<!-- Add wallet.js before the closing body tag -->
<script src="js/wallet.js"></script>
</body>
</html>
