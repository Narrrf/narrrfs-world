<!DOCTYPE html>
<html lang="en">
<?php
// Include Discord invite configuration
require_once 'discord-invite.php';
?>
<head>
  <!-- 🧠 Meta Essentials -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Finances | Narrrf's World</title>

  <!-- 🧀 Favicon & Metadata -->
  <link rel="icon" type="image/png" href="favicon-phantom.png" />
  <link rel="shortcut icon" type="image/png" href="favicon-phantom.png" />
  <meta name="theme-color" content="#facc15" />
  <meta name="msapplication-TileColor" content="#facc15" />
  <meta name="msapplication-TileImage" content="favicon-phantom.png" />
  <meta name="title" content="Narrrf's World" />
  <meta name="description" content="Web3 transparency meets utility — explore Narrrf's financial engine." />

  <!-- 🧵 OpenGraph & Twitter Preview -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Narrrf Finances" />
  <meta property="og:description" content="Track SPOINC. Unlock cheese metrics. Control the economy." />
  <meta property="og:image" content="img/cheese-finance.png" />
  <meta property="og:url" content="https://narrrfs.world/finances.html" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Narrrf Finances" />
  <meta name="twitter:description" content="Track SPOINC. Unlock cheese metrics. Control the economy." />
  <meta name="twitter:image" content="img/cheese-finance.png" />

  <!-- 📊 Chart.js (for visualizing SPOINC) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- 🎨 Tailwind CSS (Dev CDN Mode) -->
  <script src="https://cdn.tailwindcss.com"></script>

    <!-- 🔗 Discord Token of Render System -->
  <script src="discord-config.js"></script>

  <!-- 💫 Bubble Animation for charts or easter effects -->
  <style>
    @keyframes labBubble {
      0% { transform: translateY(0) scale(1); opacity: 0.7; }
      100% { transform: translateY(-60px) scale(1.2); opacity: 0; }
    }
    .animate-lab-bubble {
      animation: labBubble 5s ease-in-out infinite;
    }

    /* New Role System Style Animations */
    @keyframes trophyGlow {
      0%, 100% { 
        box-shadow: 0 0 20px rgba(251, 191, 36, 0.3), 0 0 40px rgba(251, 191, 36, 0.2);
        transform: scale(1);
      }
      50% { 
        box-shadow: 0 0 30px rgba(251, 191, 36, 0.5), 0 0 60px rgba(251, 191, 36, 0.3);
        transform: scale(1.05);
      }
    }
    
    @keyframes rolePulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.02); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .trophy-glow {
      animation: trophyGlow 3s ease-in-out infinite;
    }
    
    .role-pulse {
      animation: rolePulse 4s ease-in-out infinite;
    }
    
    .float-animation {
      animation: float 6s ease-in-out infinite;
    }
    
    .finance-card {
      transition: all 0.3s ease;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .finance-card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      border-color: rgba(251, 191, 36, 0.5);
    }
  </style>

  <!-- 📜 Dev Notes: Finance portal for charting SPOINC + riddle-based unlockables. Future API ready. -->
  <!-- 🗂️ PATH NOTE: All assets must be loaded via /img/ and /sounds/ folders. -->
</head>

<!-- 
🧪 LAB NOTE: FINANCES.HTML
------------------------------------------------------------
📊 Narrrf's World Treasury Dashboard & Secret Economic Layer

📌 Purpose:
- Visualizes $SPOINC flow, mint revenue, treasury balances
- Shows financial data via Chart.js (static or dynamic in future)
- May serve as economic API dashboard or staking view

💾 Backend Touchpoints:
- Future API: `/api/treasury.json`, `/sql/spoinc-ledger`, or `/rpc/staking-data`
- Chart.js should eventually receive live data (via JS fetch or PHP echo)
- Optional: Track page view per wallet for stat-logging

🧠 SQL Dev Ideas:
- Table: `cheese_finance_log` (wallet, page, timestamp, chartViewed)
- Table: `spoinc_mint_events` (wallet, txHash, amount, method)
- Future backend role-based chart visibility (e.g., only "Investor Mice" can see Pie #2)

🎮 Lore Integration:
- Unlock hidden cheese charts via roles or riddles
- Link to get-roles.html for deeper financial view permissions

🗂️ Uses /img/ and /sounds/ path standard

⚠️ Chart graphics must not use hardcoded external assets
🐭🧠 5-YEAR-OLD DEV JEDI REMINDER:
"If I see a file like cheese.png, I ask: is it in img/? If no, I go fix it now. If yes, I eat a snack and keep coding."

🔥 Jedi Tip from Brain 3.1:
If you're too stoned to think about SQL, just leave a comment that says:

<!-- TODO: Ask SQL Master for how this connects
and move on like a cheese ninja. ASk our Brain 3.1. SQL expert for this spot ;-)

-->


<body class="relative bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white font-sans overflow-x-hidden min-h-screen">

  <!-- 🌟 Floating Background Elements -->
  <div class="fixed inset-0 pointer-events-none z-0">
    <div class="absolute w-4 h-4 bg-yellow-400/20 rounded-full blur-md float-animation" style="top:20%; left:15%; animation-delay: 0s;"></div>
    <div class="absolute w-6 h-6 bg-purple-400/20 rounded-full blur-lg float-animation" style="top:60%; left:80%; animation-delay: 2s;"></div>
    <div class="absolute w-3 h-3 bg-pink-400/20 rounded-full blur-sm float-animation" style="top:40%; left:50%; animation-delay: 4s;"></div>
    <div class="absolute w-5 h-5 bg-blue-400/20 rounded-full blur-md float-animation" style="top:70%; left:25%; animation-delay: 1s;"></div>
  </div>

  <!-- 🧬 Lab Status Badge -->
  <div class="fixed top-4 left-4 z-50 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xs font-bold px-4 py-2 rounded-full shadow-lg animate-pulse border border-purple-400">
    🧬 Finance Portal v2.0 Active
  </div>

<!-- 
🧪 CRITICAL LAB NOTES: THE CHEESE WORLD SYSTEM OVERVIEW
------------------------------------------------------------
This section covers **NFTs**, **staking rewards**, **plots in Hytopia**, **DAO shares**, and **Web3-to-Web2 bridging** for financial tracking in the game world.

💡 **SQL Schema for Plots**:
- Users will be able to **own plots** in the **Hytopia server**, each linked to their **NFT**.
- Plot status (under construction, completed) will be tracked dynamically.
- User's financial rewards (e.g., $SPOINC) are tied to plot ownership, enabling **real-time game mechanics**.

🧠 **The SQL Flow**:
- **User Data**: `user_wallet`, `nft_count`, `plot_id`, `plot_coordinates`, `plot_status`
- **Dynamic Rendering**: Fetch **NFT ownership**, **plot data**, and **staking rewards** dynamically for each user.
- **DAO Shares**: Integrate **DAO rewards** based on plot size and NFT rarity.

🧩 **Core Features**:
- **Users with NFT roles** will unlock **plot sizes** and **game mechanics** like access to **premium areas**.
- Financial dashboard inside Hytopia will display **$SPOINC** rewards dynamically based on **plot size** and **NFT type**.
- **DAO shares** and **staking rewards** for users are **displayed in the virtual world** in real-time.

🧪 **Future SQL/Back-End Expansion**:
- Implement **roles** and **NFT traits** affecting **plot enhancements**.
- **API Sync with Discord**: Track **NFT ownership** and use it to **map plots** and **reward progression**.
- Data driven by **SQL** will power the **user experience**.

⚡ **Final Goal**:  
To create a **self-sustaining virtual world** powered by **Web3 principles**, **DAO-driven economy**, and **NFT-powered gamification**.

-->


<!-- 🔥 Finance Flask + Glow & Bubbles -->
<div class="absolute bottom-8 right-8 z-[1] pointer-events-none">
  <div class="w-40 h-40 bg-yellow-300 opacity-30 rounded-full blur-2xl absolute animate-pulse"></div>
  <div class="relative">
    <svg width="80" height="120" viewBox="0 0 100 150" fill="none" xmlns="http://www.w3.org/2000/svg" class="drop-shadow-[0_0_12px_#facc15]">
      <path d="M40 0 H60 V50 L85 120 Q90 135 75 140 H25 Q10 135 15 120 L40 50 Z" 
            fill="#facc15" stroke="#000" stroke-width="2"/>
    </svg>
    <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
      <div class="w-3 h-3 bg-yellow-400 rounded-full blur-sm animate-lab-bubble absolute" style="left:-10px"></div>
      <div class="w-4 h-4 bg-yellow-500 rounded-full blur-md animate-lab-bubble absolute delay-1000" style="left:10px"></div>
      <div class="w-2.5 h-2.5 bg-orange-300 rounded-full blur-sm animate-lab-bubble absolute delay-2000" style="left:0px"></div>
    </div>
  </div>
</div>



<!-- Navigation Bar -->
<header class="bg-black/90 backdrop-blur-md text-white py-4 px-6 shadow-xl sticky top-0 z-40 border-b border-yellow-400/30">
  <div class="max-w-6xl mx-auto flex justify-between items-center">
    <a href="index.html" class="text-xl font-bold tracking-tight text-yellow-400">🧠 Narrrf's World</a>
    <nav class="space-x-4 text-sm md:text-base flex items-center">
      <a href="index.html" class="hover:text-yellow-400 transition-colors">Home</a>
      <a href="mint.html" class="hover:text-yellow-400 transition-colors">Mint</a>
      <a href="whitepaper.html" class="hover:text-yellow-400 transition-colors">Whitepaper</a>
      <a href="get-roles.html" class="hover:text-yellow-400 transition-colors">Get Roles</a>
      <a href="project-updates.html" class="hover:text-yellow-400 transition-colors">Updates</a>
      <a href="faq.html" class="hover:text-yellow-400 transition-colors">FAQ</a>
      <button id="connect-wallet-btn" onclick="connectWallet()" 
        class="ml-2 mt-2 md:mt-0 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-2 px-4 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105">
        🔌 Connect
      </button>
      <img id="user-avatar" src="img/cheese.png" alt="PFP" class="hidden w-8 h-8 rounded-full border-2 border-yellow-400 ml-2 shadow-lg" />
      <button id="wallet-disconnect" onclick="disconnectWallet()" class="hidden ml-2 text-sm bg-red-500 hover:bg-red-600 text-white rounded-full px-3 py-1 shadow">
        ❌
      </button>
    </nav>
  </div>
</header>

<!-- Finance Intro -->
<section class="text-center py-12 px-6 relative z-10">
  <h1 class="text-4xl font-extrabold mb-2 text-yellow-400">💸 Narrrf's Financial Transparency</h1>
  <p class="text-md max-w-2xl mx-auto text-gray-300">We're building a fair and fun ecosystem — where capital flows back to those who drive it. Here's how it works.</p>
</section>

<!-- Revenue Phases Grid -->
<section class="max-w-6xl mx-auto px-6 py-12 grid md:grid-cols-3 gap-6 relative z-10">
  <div class="finance-card rounded-2xl p-6 border-l-4 border-pink-500">
    <h2 class="text-xl font-bold mb-2 text-pink-400">🧪 Phase 1 – Genesis Revenue</h2>
    <ul class="list-disc list-inside text-sm space-y-1 text-gray-300">
      <li>GEN1 NFT Mint – Primary source of launch funds</li>
      <li>Trait Redemption Mint – Special NFTs or upgrades ("Alien," etc.)</li>
      <li>GEN1 Public Mint – Long-term holder strategy</li>
      <li>GEN1 VIP NFT Airdrop – Long-term holder strategy</li>
    </ul>
  </div>

  <div class="finance-card rounded-2xl p-6 border-l-4 border-yellow-500">
    <h2 class="text-xl font-bold mb-2 text-yellow-400">💸 Phase 2 – Ecosystem Growth</h2>
    <ul class="list-disc list-inside text-sm space-y-1 text-gray-300">
      <li>Secondary Market Royalties – 5% SOL standard</li>
      <li>$DSPOINC Utility Fees – Rake, staking, raffles, etc.</li>
      <li>Benefit Seasons – Gamified NFT utility cycles</li>
      <li>GEN2 Mint – 2027 collection drop</li>
    </ul>
  </div>

  <div class="finance-card rounded-2xl p-6 border-l-4 border-green-500">
    <h2 class="text-xl font-bold mb-2 text-green-400">🌍 Phase 3 – Hytopia Revenue (2026–2030)</h2>
    <ul class="list-disc list-inside text-sm space-y-1 text-gray-300">
      <li>Real-World Partner Tabs – Merch & services in Discord</li>
      <li>Land NFTs – Digital ownership, shop features</li>
      <li>Retail Collabs – % of tokenized product sales</li>
      <li>API Access – Paid dashboards for Web3 retail</li>
    </ul>
  </div>
</section>

<!-- Allocation Pie Chart Section -->
<section class="max-w-4xl mx-auto py-12 px-6 text-center relative z-10">
  <h2 class="text-3xl font-bold mb-4 text-yellow-400">📊 Updated Funding Distribution</h2>
  <p class="mb-6 text-sm max-w-xl mx-auto text-gray-300">Our mission is to redistribute value to those who contribute most to the ecosystem. Here's how every dollar flows:</p>
  <div class="finance-card rounded-2xl p-6">
    <canvas id="financeChart" class="mx-auto max-w-md"></canvas>
  </div>
</section>

<!-- Chart Script -->
<script>
  const ctx = document.getElementById('financeChart');
  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: [
        '💰 Benefit Seasons & Rewards (70%)',
        '📈 Marketing & PR (15%)',
        '🏗️ Hytopia Development (7%)',
        '💼 Web3 Tools & Ops (5%)',
        '👥 Core Team (3%)'
      ],
      datasets: [{
        data: [70, 15, 7, 5, 3],
        backgroundColor: [
          '#3b82f6', // Blue for Benefits
          '#ec4899', // Pink for Marketing
          '#10b981', // Green for Development
          '#f59e0b', // Orange for Tools
          '#ef4444'  // Red for Team
        ],
        borderColor: [
          '#1d4ed8', // Darker blue
          '#be185d', // Darker pink
          '#047857', // Darker green
          '#d97706', // Darker orange
          '#dc2626'  // Darker red
        ],
        borderWidth: 2,
        hoverOffset: 4
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            color: '#e5e7eb', // Light gray text for dark theme
            font: {
              size: 12,
              weight: '500'
            },
            padding: 20,
            usePointStyle: true,
            pointStyle: 'circle'
          }
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.9)',
          titleColor: '#fbbf24', // Yellow title
          bodyColor: '#e5e7eb', // Light gray body
          borderColor: '#fbbf24',
          borderWidth: 1,
          cornerRadius: 8
        }
      },
      animation: {
        animateRotate: true,
        animateScale: true
      }
    }
  });
</script>

<!-- Call to Action -->
<section class="text-center py-12 relative z-10">
  <a href="mint.html" class="inline-block bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-black text-lg font-semibold px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
    🚀 Go to Mint Lab
  </a>
</section>

<!-- Final Thoughts Section -->
<section class="bg-gradient-to-r from-purple-900/30 to-pink-900/30 py-16 px-6 mt-20 relative z-10 rounded-2xl border border-purple-500/30">
  <div class="max-w-4xl mx-auto text-center">
    <h2 class="text-3xl font-bold mb-4 text-purple-400">🧠 Final Thoughts</h2>
    <p class="text-md mb-6 max-w-2xl mx-auto text-gray-300">
      Narrrf's World isn't just another NFT drop. It's a social experiment, a chaotic cartoon economy, and a mission to put value back in the hands of the community. Our finances are structured to reward holders, empower builders, and push the boundaries of Web3 storytelling.
    </p>
    <blockquote class="italic text-lg text-purple-300 font-semibold">
      "In a world run by cheese and chaos, only those who dare to play win big." 🚀
    </blockquote>
  </div>
</section>

<!-- Global Wallet Connect + PFP Script -->
<script>
  async function connectWallet() {
    const avatar = document.getElementById('user-avatar');
    const connectButton = document.getElementById('connect-wallet-btn');

    if ('solana' in window) {
      const provider = window.solana;
      if (provider.isPhantom) {
        try {
          const response = await provider.connect();
          const walletAddress = response.publicKey.toString();
          localStorage.setItem('walletAddress', walletAddress);
          connectButton.innerText = `🟢 ${walletAddress.slice(0, 4)}...${walletAddress.slice(-4)}`;
          connectButton.disabled = true;
          avatar?.classList.remove('hidden');
        } catch (err) {
          console.error("❌ Wallet connect error:", err);
        }
      }
    }
  }

  window.addEventListener('DOMContentLoaded', () => {
    const storedWallet = localStorage.getItem('walletAddress');
    const avatar = document.getElementById('user-avatar');
    const connectButton = document.getElementById('connect-wallet-btn');

    if (storedWallet && connectButton) {
      connectButton.innerText = `🟢 ${storedWallet.slice(0, 4)}...${storedWallet.slice(-4)}`;
      connectButton.disabled = true;
      avatar?.classList.remove('hidden');
    }
  });

  function disconnectWallet() {
    localStorage.removeItem('walletAddress');
    const avatar = document.getElementById('user-avatar');
    const connectButton = document.getElementById('connect-wallet-btn');

    if (avatar) avatar.classList.add('hidden');
    if (connectButton) {
      connectButton.innerText = '🔌 Connect';
      connectButton.disabled = false;
    }
  }
</script>

<!-- 🐭 Investor Mouse Mascot -->
<div class="fixed bottom-8 left-8 z-40">
  <img src="img/investor-mouse1.png" alt="Investor Mouse"
       class="w-28 md:w-36 floaty drop-shadow-xl investor-glow hover:scale-105 transition-transform duration-300"
       title="Tracking every cheese... I mean coin!"
                       onclick="window.location.href='<?php echo $discord_url; ?>'"
       style="cursor: pointer;" />
</div>

<!-- Add wallet.js before the closing body tag -->
<script src="js/wallet.js"></script>
</body>
</html>


