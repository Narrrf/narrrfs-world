<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"/>
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>🧀 Space Cheese Invaders - Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    /* 🚀 NEW: Prevent mobile screenshot and selection issues */
    * {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    
    /* Allow text selection in specific areas if needed */
    .allow-select {
      -webkit-user-select: text;
      -khtml-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
    
    @keyframes pop {
      0% { transform: scale(0.9); opacity: 0.3; }
      100% { transform: scale(1); opacity: 1; }
    }
    .animate-pop {
      animation: pop 0.4s ease-out;
    }
    @keyframes fade-in {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .animate-fade-in {
      animation: fade-in 0.3s ease-out;
    }
    
    /* 🆘 NEW: Mobile-friendly game panel styles */
    @media (max-width: 768px) {
      #game-panel-overlay {
        padding: 10px;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      #game-panel-overlay > div {
        max-width: 95vw;
        max-height: 95vh;
        padding: 20px;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      #game-panel-overlay button {
        min-height: 60px;
        font-size: 0.9em;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
      }
      
      #game-panel-overlay h2 {
        font-size: 1.3em;
      }
      
      #game-panel-overlay h3 {
        font-size: 1.1em;
      }
    }
    
    /* 🎮 Game panel button animations */
    #game-panel-btn {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    
    #game-panel-btn:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 8px 25px rgba(0,0,0,0.5);
    }
    
    #game-panel-btn:active {
      transform: scale(0.95);
    }
  </style>
</head>

<body class="bg-[#2f3136] text-white font-sans min-h-screen">

<!-- 🔰 Header -->
<header class="w-full bg-black py-4 px-6 text-yellow-400 shadow-md">
  <div class="max-w-6xl mx-auto flex justify-between items-center">
    <h1 class="text-xl font-bold tracking-wide">🧀 Space Cheese Invaders - Test</h1>
    <nav class="space-x-4 text-sm md:text-base flex items-center">
      <a href="profile.html" class="hover:text-pink-400">← Back to Profile</a>
    </nav>
  </div>
</header>

<!-- 🚀 SPACE INVADERS PANEL -->
<section id="space-cheese-invaders" class="max-w-6xl w-full mx-auto px-4 mt-8 flex flex-col items-center justify-center">
  <section class="relative bg-black text-yellow-300 py-6 px-6 rounded-3xl shadow-xl ring-4 ring-yellow-400/40 max-w-md w-full">
    <div class="absolute top-4 left-4 bg-yellow-400 text-black text-xs font-bold px-3 py-1 rounded-full shadow animate-pulse z-10">
      🚀 SPACE INVADERS
    </div>

    <h2 class="text-center text-2xl font-bold mb-3 text-yellow-100 drop-shadow">SPACE CHEESE INVADERS</h2>
    
    <div class="relative">
      <canvas id="space-invaders-canvas" width="400" height="600" class="bg-gray-900 border-4 border-yellow-400 mx-auto block rounded-lg shadow-lg w-full max-w-md h-auto" style="max-height: 60vh;"></canvas>

      <div id="space-invaders-countdown" class="absolute inset-0 flex items-center justify-center text-5xl font-bold text-yellow-300 bg-black/80 hidden z-50 rounded-lg">
        5
      </div>
    </div>

    <div class="text-center mt-3 space-y-2">
      <button id="start-space-invaders-btn" class="bg-yellow-400 hover:bg-yellow-300 text-black font-bold px-4 py-2 rounded-xl shadow-lg w-32">▶️ Start</button>
      <button id="pause-space-invaders-btn" class="bg-yellow-500 hover:bg-yellow-400 text-black font-bold px-4 py-1 rounded-xl shadow-md w-32">⏸️ Pause</button>
    </div>

    <!-- 🎮 Mobile Controls -->
    <div id="mobile-controls" class="block md:hidden mt-3 flex flex-col items-center space-y-2">
      <!-- 🆘 NEW: Enhanced mobile controls with game panel -->
      <div class="text-center p-3 bg-gray-800 rounded-lg border border-yellow-400">
        <p class="text-yellow-300 font-bold mb-2">📱 MOBILE CONTROLS</p>
        <p class="text-sm text-gray-300 mb-2">🎮 <strong>Swipe on canvas to move ship</strong></p>
        <p class="text-sm text-gray-300 mb-2">👆 <strong>Tap on canvas to shoot</strong></p>
        <p class="text-sm text-yellow-300 font-bold">🎮 Use GAME PANEL button (bottom right) for all controls!</p>
      </div>
    </div>

    <p id="space-invaders-score" class="text-center mt-4 text-sm font-semibold text-yellow-200 animate-pulse">
      💰 Space Invaders Score: $0 DSPOINC
    </p>
    
    <!-- 🚀 NEW: Weapon Display -->
    <p id="weapon-display" class="text-center mt-2 text-sm font-semibold text-cyan-300">
      🔫 Weapon: NORMAL
    </p>

    <div class="text-xs italic text-center text-gray-500 mt-1 mb-2">
      🎮 Controls: WASD/Arrows to move (up/down/left/right), Space to shoot, P to pause, T to toggle auto-shoot<br>
      📱 Mobile: Swipe on canvas to move, tap to shoot, or use 🎮 GAME PANEL button for all controls<br>
      🚀 NEW: Enhanced mobile controls with popup game panel - no need to pause!
    </div>
  </section>
</section>

<!-- 🧠 MODALS GAMEOVER -->
<div id="space-invaders-over-modal" class="hidden fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black bg-opacity-80 z-50 backdrop-blur-sm">
  <div class="bg-yellow-100 text-gray-900 rounded-3xl px-6 py-8 text-center shadow-2xl border-4 border-yellow-400 max-w-xs w-full animate-fade-in">
    <h2 class="text-3xl font-extrabold mb-3 text-yellow-900 drop-shadow">🧠 GAME OVER</h2>
    <p id="space-invaders-final-score-text" class="text-lg font-mono text-gray-800 mb-6">You earned $0 DSPOINC</p>
    <button onclick="window.location.reload()" class="bg-yellow-400 hover:bg-yellow-300 text-black font-bold px-6 py-2 rounded-xl shadow-lg">🔁 Play Again</button>
  </div>
</div>

<div id="space-invaders-win-modal" class="hidden fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black bg-opacity-80 z-50 backdrop-blur-sm">
  <div class="bg-green-100 text-gray-900 rounded-3xl px-6 py-8 text-center shadow-2xl border-4 border-green-400 max-w-xs w-full animate-fade-in">
    <h2 class="text-3xl font-extrabold mb-3 text-green-900 drop-shadow">🏆 VICTORY!</h2>
    <p id="space-invaders-win-score-text" class="text-lg font-mono text-gray-800 mb-6">You earned $0 DSPOINC</p>
    <button onclick="window.location.reload()" class="bg-green-400 hover:bg-green-300 text-black font-bold px-6 py-2 rounded-xl shadow-lg">🔁 Play Again</button>
  </div>
</div>

<!-- 🍩 Footer -->
<footer class="text-center mt-16 mb-10">
  <!-- Back to Top Link -->
  <div class="mb-6">
    <a href="#top" class="text-sm text-gray-500 hover:text-pink-500 transition-colors duration-200">
      🔝 Back to Top
    </a>
  </div>
  
  <!-- 🧀 Narrrf's Cheese Universe Section -->
  <div class="mb-8 p-6 bg-gradient-to-r from-yellow-100/50 to-orange-100/50 rounded-xl border border-yellow-300/30">
    <div class="text-lg font-bold text-yellow-800 mb-4">
      🧀 Narrrf's Cheese Universe
    </div>
    <div class="text-sm text-yellow-700 mb-6">
      Where gaming meets cheese innovation
    </div>
    
    <!-- Quick Links -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      <a href="/index.html" class="text-yellow-600 hover:text-yellow-800 transition-colors duration-200 font-medium">
        🏠 Home
      </a>
      <a href="/whitepaper-pro.html" class="text-yellow-600 hover:text-yellow-800 transition-colors duration-200 font-medium">
        📜 Read the Whitepaper
      </a>
      <a href="/mint.html" class="text-yellow-600 hover:text-yellow-800 transition-colors duration-200 font-medium">
        🎨 Mint Your NFT
      </a>
      <a href="/profile.html" class="text-yellow-600 hover:text-yellow-800 transition-colors duration-200 font-medium">
        🎭 Get Roles
      </a>
    </div>
    
    <!-- Socials -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
      <a href="https://x.com/narrrf12345" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 transition-colors duration-200 font-medium">
        🐦 Twitter / X
      </a>
      <a href="https://discord.gg/qYYNGJrR43" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:text-indigo-800 transition-colors duration-200 font-medium">
        🎮 Join Discord
      </a>
      <a href="https://www.clubgg.com/" target="_blank" rel="noopener noreferrer" class="text-green-600 hover:text-green-800 transition-colors duration-200 font-medium">
        🃏 Poker ClubGG
      </a>
      <a href="https://discord.gg/qYYNGJrR43" target="_blank" rel="noopener noreferrer" class="text-purple-600 hover:text-purple-800 transition-colors duration-200 font-medium">
        📧 Open a Ticket
      </a>
    </div>
    
    <!-- Contact & Location -->
    <div class="text-xs text-yellow-600/80 mb-4">
      🌍 Web3 Only – Austria Based
    </div>
  </div>
  
  <!-- Legal & Important Links - More Prominent -->
  <div class="mb-6 p-4 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 rounded-lg border border-blue-200/30">
    <div class="text-sm font-semibold text-blue-800 mb-3">
      📋 Important Legal & Support Links
    </div>
    <div class="flex flex-wrap justify-center gap-6 text-sm">
      <a href="/privacy-policy.html" class="text-blue-600 hover:text-blue-800 transition-colors duration-200 font-medium px-3 py-2 bg-white/70 rounded-lg border border-blue-200/50 hover:bg-white hover:shadow-md">
        🍪 Privacy Policy
      </a>
      <a href="/faq.html" class="text-blue-600 hover:text-blue-800 transition-colors duration-200 font-medium px-3 py-2 bg-white/70 rounded-lg border border-blue-200/50 hover:bg-white hover:shadow-md">
        ❓ FAQ
      </a>
      <a href="/profile.html" class="text-blue-600 hover:text-blue-800 transition-colors duration-200 font-medium px-3 py-2 bg-white/70 rounded-lg border border-blue-200/50 hover:bg-white hover:shadow-md">
        👤 Profile
      </a>
    </div>
  </div>
  
  <!-- Copyright & Branding -->
  <div class="pt-6 border-t border-yellow-600/30 text-xs text-yellow-600/80">
    <div class="mb-2">
      © 2025 Narrrf's World. Built with brain & cheese 🧠🧀
    </div>
    <div class="text-yellow-500/70">
      🚀 Powered by the ultimate cheese gaming technology
    </div>
  </div>
</footer>

<!-- 🧀 Load Space Cheese Invaders Script -->
<script src="scripts/space-cheese-invaders.js"></script>

<!-- 🧪 Load Boss Test Helper Script -->
<script src="scripts/boss-test-helper.js"></script>

<!-- 🔄 Load Boss Reset Script -->
<script src="scripts/reset-boss-spawning.js"></script>

<!-- 🎮 Game Event Listeners -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('🎮 Space Invaders Test Page Loaded');
  
  const startBtn = document.getElementById('start-space-invaders-btn');
  const pauseBtn = document.getElementById('pause-space-invaders-btn');
  
  if (startBtn) {
    console.log('✅ Start button found');
    startBtn.addEventListener('click', function() {
      console.log('🚀 Start button clicked');
      if (window.initSpaceInvaders) {
        console.log('✅ Calling initSpaceInvaders');
        window.initSpaceInvaders();
        // Start the game immediately after initialization
        if (window.startGameWithCountdown) {
          console.log('🚀 Starting game with countdown');
          window.startGameWithCountdown();
        } else {
          console.log('🚀 Starting game directly');
          window.startGame();
        }
        startBtn.disabled = true;
        startBtn.textContent = '🎮 Playing...';
      } else {
        console.error('❌ initSpaceInvaders not available');
      }
    });
  } else {
    console.error('❌ Start button not found');
  }
  
  if (pauseBtn) {
    console.log('✅ Pause button found');
    pauseBtn.addEventListener('click', function() {
      console.log('⏸️ Pause button clicked');
      // Pause functionality will be handled by the game script
    });
  } else {
    console.error('❌ Pause button not found');
  }
  
  // Listen for game end events
  window.addEventListener('spaceInvadersGameEnd', function() {
    console.log('🎮 Game ended, resetting start button');
    if (startBtn) {
      startBtn.disabled = false;
      startBtn.textContent = '▶️ Start';
    }
  });
});
</script>

</body>
</html>
